(function(a){"use strict";var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t;b=a.Books_DataBase=a.Books_DataBase||{};c=b.Client=b.Client||{};d=c.database=c.database||{};e=a["Books-DataBase_Templates"]=a["Books-DataBase_Templates"]||{};f=a.WebSharper;g=f&&f.Strings;h=f&&f.UI;i=h&&h.Templating;j=i&&i.Runtime;k=j&&j.Server;l=k&&k.ProviderBuilder;m=k&&k.Handler;n=k&&k.TemplateInstance;o=h&&h.ListModel;p=h&&h.Doc;q=f&&f.Seq;r=h&&h.Var$1;s=h&&h.Client;t=s&&s.Templates;d.Create=function(u,v,w){return d.New(u,v,w);};d.New=function(u,v,w){return{Title:u,Author:v,date:w};};c.Main$94$20=function(u,v,w,x,y){return function(){u.Clear();x.Iter(function(z){if(!(g.Trim(z.Title)=="")&&z.Title.toLowerCase().indexOf(v.Get().toLowerCase())!=-1&&(!(g.Trim(z.Author)=="")&&z.Author.toLowerCase().indexOf(w.Get().toLowerCase())!=-1))u.Append(d.Create(z.Title,z.Author,z.date));});y.Set(u.get_Length()===0?(u.Append(d.Create("","",0)),"the book \""+v.Get()+"\" is not found."):"the book \""+v.Get()+"\" is found, ");};};c.Main$81$22=function(u,v,w,x,y,z){return function(){if(u.Get()===""||v.Get()==="")w.Set(" Please enter a valid input !");else{y.Append(d.Create(u.Get(),v.Get(),x.Get()));z.Clear();y.Iter(function(A){z.Append(d.Create(A.Title,A.Author,A.date));});w.Set(" The book \""+a.String(u.Get())+"\" is added successfully.");u.Set("");}};};c.Main=function(){var u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L;function M(N){var O,P,Q,R,S,T;return(O=(P=(Q=(R=new l.New$1(),(R.h.push({$:1,$0:"title",$1:N.Title}),R)),(Q.h.push({$:1,$0:"author",$1:N.Author}),Q)),(P.h.push({$:1,$0:"published",$1:a.String(N.date)}),P)),(S=m.CompleteHoles(O.k,O.h,[]),(T=new n.New(S[1],e.row(S[0])),O.i=T,T))).get_Doc();}u=o.FromSeq([d.Create("The Great Gatsby","F. Scott Fitzgerald",1999),d.Create("Animal Farm","George Orwell",1999),d.Create("The Hobbit, or There and Back Again","J.R.R. Tolkien",1999),d.Create("The Diary of a Young Girl","Anne Frank",1999),d.Create("The Little Prince","Antoine de Saint-Exup√©ry",1999),d.Create("Fahrenheit 451","Ray Bradbury",1999),d.Create("The Catcher in the Rye","J.D. Salinger",1999)]);v=o.FromSeq([]);v.Clear();u.Iter(function(N){v.Append(d.Create(N.Title,N.Author,N.date));});w=p.BindView(function(N){return p.Concat(q.map(M,N));},v.v);x=r.Create$1("");y=r.Create$1("");z=r.Create$1("");A=r.Create$1(2022);r.Create$1("");return(B=(C=(D=(E=x.get_View(),(F=(G=(H=(I=(J=new l.New$1(),(J.h.push({$:0,$0:"window",$1:w}),J)),(I.h.push({$:10,$0:"title",$1:y}),I)),(H.h.push({$:10,$0:"author",$1:z}),H)),(G.h.push({$:13,$0:"date",$1:A}),G)),(F.h.push({$:2,$0:"message",$1:E}),F))),(D.h.push(m.EventQ2(D.k,"register",function(){return D.i;},function(){if(y.Get()===""||z.Get()==="")x.Set(" Please enter a valid input !");else{u.Append(d.Create(y.Get(),z.Get(),A.Get()));v.Clear();u.Iter(function(N){v.Append(d.Create(N.Title,N.Author,N.date));});x.Set(" The book \""+a.String(y.Get())+"\" is added successfully.");y.Set("");}})),D)),(C.h.push(m.EventQ2(C.k,"search",function(){return C.i;},function(){v.Clear();u.Iter(function(N){if(!(g.Trim(N.Title)=="")&&N.Title.toLowerCase().indexOf(y.Get().toLowerCase())!=-1&&(!(g.Trim(N.Author)=="")&&N.Author.toLowerCase().indexOf(z.Get().toLowerCase())!=-1))v.Append(d.Create(N.Title,N.Author,N.date));});x.Set(v.get_Length()===0?(v.Append(d.Create("","",0)),"the book \""+y.Get()+"\" is not found."):"the book \""+y.Get()+"\" is found, ");})),C)),(K=m.CompleteHoles(B.k,B.h,[["title",0,null],["author",0,null],["date",1,null]]),(L=new n.New(K[1],e.mainform(K[0])),B.i=L,L))).get_Doc();};e.row=function(u){t.LoadLocalTemplates("main");return u?t.NamedTemplate("main",{$:1,$0:"row"},u):void 0;};e.mainform=function(u){t.LoadLocalTemplates("main");return u?t.NamedTemplate("main",{$:1,$0:"mainform"},u):void 0;};}(self));
